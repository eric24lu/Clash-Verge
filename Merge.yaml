# Merge Template for clash verge
# The `Merge` format used to enhance profile

geodata-mode: false
geox-url:
  mmdb: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/GeoLite2-Country.mmdb"
  asn: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/GeoLite2-ASN.mmdb"
geo-auto-update: true
geo-update-interval: 168

proxy-groups:
  - name: Subscription
    type: select
    include-all: true
    exclude-type: direct
    filter: ^((?!(Expire)).)*$

  - name: Proxy
    type: select
    proxies:
      - HK
      - TW
      - JP
      - SG
      - US
      - WW
  
  - name: Speedtest
    type: select
    proxies:
      - DIRECT
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: Apple
    type: select
    proxies:
      - DIRECT
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: Google
    type: select
    proxies:
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: Microsoft
    type: select
    proxies:
      - DIRECT
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: Telegram
    type: select
    proxies:
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: YouTube
    type: select
    proxies:
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: Netflix
    type: select
    proxies:
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: Gaming
    type: select
    proxies:
      - DIRECT
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: Social
    type: select
    proxies:
      - HK
      - TW
      - JP
      - SG
      - US
      - WW

  - name: Bilibili
    type: select
    proxies:
      - DIRECT
      - HK
      - TW

  - name: Final
    type: select
    proxies:
      - Proxy
      - DIRECT

  - name: HK
    type: url-test
    url: http://1.0.0.1/generate_204
    interval: 300
    include-all: true
    exclude-type: direct
    filter: "üá≠üá∞|È¶ôÊ∏Ø|Hong|HK"

  - name: TW
    type: url-test
    url: http://1.0.0.1/generate_204
    interval: 300
    include-all: true
    exclude-type: direct
    filter: "üá®üá≥|Âè∞Êπæ|Taiwan|TW"

  - name: JP
    type: url-test
    url: http://1.0.0.1/generate_204
    interval: 300
    include-all: true
    exclude-type: direct
    filter: "üáØüáµ|Êó•Êú¨|Japan|JP"

  - name: SG
    type: url-test
    url: http://1.0.0.1/generate_204
    interval: 300
    include-all: true
    exclude-type: direct
    filter: "üá∏üá¨|Êñ∞Âä†Âù°|Singapore|SG"

  - name: US
    type: url-test
    url: http://1.0.0.1/generate_204
    interval: 300
    include-all: true
    exclude-type: direct
    filter: "üá∫üá∏|ÁæéÂõΩ|States|US"

  - name: WW
    type: select
    include-all: true
    exclude-type: direct
    filter: ^((?!(üá≠üá∞|üá®üá≥|üáØüáµ|üá∏üá¨|üá∫üá∏|Ê∏Ø|Âè∞|Êó•Êú¨|Êñ∞Âä†Âù°|Áæé|HK|Hong|TW|Taiwan|JP|Japan|SG|Singapore|US|States|Expire|Traffic|00.00 G|Áõ¥Ëøû|ÂπøÂëä|Âà∞Êúü|ÊµÅÈáè|Ââ©‰Ωô)).)*$

rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml"
    path: ./ruleset/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400

  telegram:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml"
    path: ./ruleset/telegram.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400

  youtube:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml"
    path: ./ruleset/youtube.yaml
    interval: 86400
    
  netflix:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml"
    path: ./ruleset/netflix.yaml
    interval: 86400
    
  netflixcidr:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix_IP.yaml"
    path: ./ruleset/netflixcidr.yaml
    interval: 86400

  tiktok:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml"
    path: ./ruleset/tiktok.yaml
    interval: 86400

  bilibili:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml"
    path: ./ruleset/bilibili.yaml
    interval: 86400

  steam:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml"
    path: ./ruleset/steam.yaml
    interval: 86400

  steamlist:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/eric24lu/Clash-Verge/main/Steamlist.yaml"
    path: ./ruleset/steamlist.yaml
    interval: 86400

  facebook:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Facebook/Facebook.yaml"
    path: ./ruleset/facebook.yaml
    interval: 86400

  instagram:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Instagram/Instagram.yaml"
    path: ./ruleset/instagram.yaml
    interval: 86400

  reddit:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Reddit/Reddit.yaml"
    path: ./ruleset/reddit.yaml
    interval: 86400
  
  openai:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml"
    path: ./ruleset/openai.yaml
    interval: 86400

  claude:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml"
    path: ./ruleset/claude.yaml
    interval: 86400

  github:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml"
    path: ./ruleset/github.yaml
    interval: 86400

  copilot:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml"
    path: ./ruleset/copilot.yaml
    interval: 86400

  onedrive:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.yaml"
    path: ./ruleset/onedrive.yaml
    interval: 86400

  microsoft:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./ruleset/microsoft.yaml
    interval: 86400

  speedtest:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Speedtest/Speedtest.yaml"
    path: ./ruleset/speedtest.yaml
    interval: 86400
  
  twitch:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitch/Twitch.yaml"
    path: ./ruleset/twitch.yaml
    interval: 86400

  bahamut:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml"
    path: ./ruleset/bahamut.yaml
    interval: 86400

  pikpak:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/eric24lu/ios_rule_script/master/rule/Clash/PikPak/PikPak.yaml"
    path: ./ruleset/pikpak.yaml
    interval: 86400

rules:
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,169.254.0.0/16,DIRECT,no-resolve
  - IP-CIDR,224.0.0.0/4,DIRECT,no-resolve
  - DST-PORT,5353,DIRECT
  - DST-PORT,62078,DIRECT
  - PROCESS-NAME,AppleMobileDeviceService.exe,DIRECT
  - PROCESS-NAME,iTunes.exe,DIRECT
  - PROCESS-NAME,iCloud.exe,DIRECT
  - PROCESS-NAME,Sideloadly.exe,DIRECT
  - PROCESS-NAME,iMazing.exe,DIRECT
  - RULE-SET,lancidr,DIRECT,no-resolve
  - RULE-SET,cncidr,DIRECT,no-resolve
  - RULE-SET,applications,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,reject,REJECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,youtube,YouTube
  - RULE-SET,google,Google
  - RULE-SET,onedrive,SG
  - RULE-SET,microsoft,Microsoft
  - RULE-SET,telegram,Telegram,no-resolve
  - RULE-SET,reddit,Social
  - RULE-SET,instagram,Social
  - RULE-SET,facebook,Social
  - RULE-SET,steam,Gaming
  - RULE-SET,steamlist,Gaming
  - RULE-SET,netflix,Netflix
  - RULE-SET,netflixcidr,Netflix,no-resolve
  - RULE-SET,tiktok,Proxy
  - RULE-SET,twitch,Proxy
  - RULE-SET,speedtest,Speedtest
  - RULE-SET,openai,US
  - RULE-SET,claude,US
  - RULE-SET,copilot,US
  - RULE-SET,github,US
  - RULE-SET,bahamut,TW
  - RULE-SET,pikpak,SG
  - RULE-SET,gfw,Proxy
  - RULE-SET,tld-not-cn,Proxy
  - RULE-SET,proxy,Proxy
  - RULE-SET,bilibili,Bilibili
  - RULE-SET,direct,DIRECT
  - GEOIP,CN,DIRECT,no-resolve
  - MATCH,Final
